"use strict";var recaptcha_enabled=cwginstock.enable_recaptcha;var is_v3_recaptcha=cwginstock.is_v3_recaptcha;var recaptcha_site_key=cwginstock.recaptcha_site_key;var gtoken="";var popup_notifier={init:function(){jQuery(document).on("click",".cwg_popup_submit",function(){jQuery.blockUI({message:null});var e=jQuery(this);var a=e.attr("data-product_id");var b=e.attr("data-variation_id");var d=e.attr("data-security");var c={action:"cwg_trigger_popup_ajax",product_id:a,variation_id:b,security:d};if(recaptcha_enabled=="1"&&is_v3_recaptcha=="yes"){popup_notifier.popup_generate_v3_response(this)}else{popup_notifier.perform_ajax(c)}return false})},popup_generate_v3_response:function(a){if(recaptcha_enabled=="1"&&is_v3_recaptcha=="yes"){grecaptcha.ready(function(){grecaptcha.execute(recaptcha_site_key,{action:"popup_form"}).then(function(c){console.log(c);var f=jQuery(a);var b=f.attr("data-product_id");var d=f.attr("data-variation_id");var e={action:"cwg_trigger_popup_ajax",product_id:b,variation_id:d,security:c};popup_notifier.perform_ajax(e);gtoken=c})})}},perform_ajax:function(a){jQuery.ajax({type:"post",url:cwginstock.default_ajax_url,data:a,success:function(b){jQuery.unblockUI();Swal.fire({html:b,showCloseButton:true,showConfirmButton:false,willOpen:function(){if("1"==cwginstock.enable_recaptcha){jQuery(".g-recaptcha").before('<div id="cwg-google-recaptcha"></div>');jQuery(".g-recaptcha").remove()}},didOpen:function(){jQuery(document).trigger("cwginstock_popup_open_callback")},willClose:function(){jQuery(document).trigger("cwginstock_popup_close_callback")}})},error:function(d,b,c){jQuery.unblockUI()}})}};popup_notifier.init();jQuery(document).on("cwginstock_popup_open_callback",function(){instock_notifier.onloadcallback();instock_notifier.initialize_phone()});jQuery(document).on("cwginstock_popup_close_callback",function(){instock_notifier.resetcallback()});
